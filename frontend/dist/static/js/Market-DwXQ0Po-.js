import{d as V,v as k,a6 as D,c as g,b as e,a7 as O,M as R,w as a,K as $,X as q,$ as L,a8 as N,a4 as T,B as z,F as j,r as A,C as K,g as W,f as i,E as X,e as G,a as r,o as v,_ as w,k as H,u as J}from"./index-BrQRFijk.js";/* empty css                 *//* empty css                     *//* empty css               *//* empty css                  *//* empty css               */import{j as P}from"./index-CqoqUkBq.js";const Q={class:"market-form"},Y=V({__name:"MarketForm",emits:["submit"],setup(y,{emit:p}){const f=p,s=k(),u=k(!1),l=D({author:"",name:"",version:"",platform:"",suffix:"offline"}),E=[{label:"Linux x86_64",value:"manylinux2014_x86_64"},{label:"Linux aarch64",value:"manylinux2014_aarch64"},{label:"Windows x86_64",value:"win_amd64"},{label:"macOS x86_64",value:"macosx_10_9_x86_64"},{label:"macOS arm64",value:"macosx_11_0_arm64"}],h={author:[{required:!0,message:"请输入插件作者",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],name:[{required:!0,message:"请输入插件名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],version:[{required:!0,message:"请输入插件版本",trigger:"blur"},{validator:(d,t,n)=>{t?P(t)?n():n(new Error("请输入正确的版本号格式，如: 1.0.0")):n(new Error("请输入版本号"))},trigger:"blur"}]},b=async()=>{if(s.value)try{await s.value.validate(),u.value=!0;const d={author:l.author,name:l.name,version:l.version,platform:l.platform||void 0,suffix:l.suffix||"offline"};f("submit",d)}catch(d){console.error("表单验证失败:",d)}finally{u.value=!1}},M=()=>{s.value&&s.value.resetFields()};return(d,t)=>{const n=T,m=N,_=L,c=q,S=K,F=z,C=G("Download"),B=X,x=W,I=O,U=$;return v(),g("div",Q,[e(I,{ref_key:"formRef",ref:s,model:l,rules:h,"label-width":"120px",onSubmit:R(b,["prevent"])},{default:a(()=>[e(c,{gutter:24},{default:a(()=>[e(_,{span:12},{default:a(()=>[e(m,{label:"插件作者",prop:"author"},{default:a(()=>[e(n,{modelValue:l.author,"onUpdate:modelValue":t[0]||(t[0]=o=>l.author=o),placeholder:"请输入插件作者名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{span:12},{default:a(()=>[e(m,{label:"插件名称",prop:"name"},{default:a(()=>[e(n,{modelValue:l.name,"onUpdate:modelValue":t[1]||(t[1]=o=>l.name=o),placeholder:"请输入插件名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,{gutter:24},{default:a(()=>[e(_,{span:12},{default:a(()=>[e(m,{label:"插件版本",prop:"version"},{default:a(()=>[e(n,{modelValue:l.version,"onUpdate:modelValue":t[2]||(t[2]=o=>l.version=o),placeholder:"例如: 1.0.0",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{span:12},{default:a(()=>[e(m,{label:"目标平台"},{default:a(()=>[e(F,{modelValue:l.platform,"onUpdate:modelValue":t[3]||(t[3]=o=>l.platform=o),placeholder:"选择目标平台（可选）",clearable:"",style:{width:"100%"}},{default:a(()=>[(v(),g(j,null,A(E,o=>e(S,{key:o.value,label:o.label,value:o.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,{gutter:24},{default:a(()=>[e(_,{span:12},{default:a(()=>[e(m,{label:"包后缀"},{default:a(()=>[e(n,{modelValue:l.suffix,"onUpdate:modelValue":t[4]||(t[4]=o=>l.suffix=o),placeholder:"默认: offline"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,null,{default:a(()=>[e(x,{type:"primary",onClick:b,loading:u.value,size:"large"},{default:a(()=>[e(B,null,{default:a(()=>[e(C)]),_:1}),t[5]||(t[5]=i(" 开始下载并重新打包 "))]),_:1,__:[5]},8,["loading"]),e(x,{onClick:M,size:"large"},{default:a(()=>t[6]||(t[6]=[i(" 重置 ")])),_:1,__:[6]})]),_:1})]),_:1},8,["model"]),e(U,{title:"示例",type:"info",closable:!1,class:"example-alert"},{default:a(()=>t[7]||(t[7]=[r("div",{class:"example-content"},[r("p",null,[r("strong",null,"作者:"),i(" langgenius")]),r("p",null,[r("strong",null,"名称:"),i(" agent")]),r("p",null,[r("strong",null,"版本:"),i(" 0.0.9")]),r("p",null,[r("strong",null,"说明:"),i(" 将从 Dify Marketplace 下载 langgenius/agent v0.0.9 插件并重新打包")])],-1)])),_:1})])}}}),Z=w(Y,[["__scopeId","data-v-14a33e50"]]),ee={class:"market-mode-page"},le={class:"market-form-container"},ae=V({__name:"Market",setup(y){const p=J(),f=H(),s=async u=>{try{const l=await f.createMarketTask(u);l&&p.push(`/tasks/${l.task_id}`)}catch(l){console.error("Market任务创建失败:",l)}};return(u,l)=>(v(),g("div",ee,[l[0]||(l[0]=r("div",{class:"page-header"},[r("h1",null,"Market模式"),r("p",null,"从Dify Market下载插件进行重新打包处理")],-1)),r("div",le,[e(Z,{onSubmit:s})])]))}}),ie=w(ae,[["__scopeId","data-v-466c8449"]]);export{ie as default};
